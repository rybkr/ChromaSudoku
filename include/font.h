#ifndef FONT_H_0DAD24E515E0AB81
#define FONT_H_0DAD24E515E0AB81

#include "hub75.h"
#include <stdint.h>

static const uint8_t font_5x7[][7] = {
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // Space
    {0x04, 0x0A, 0x11, 0x11, 0x1F, 0x11, 0x11}, // A - HD44780 style
    {0x1E, 0x11, 0x11, 0x1E, 0x11, 0x11, 0x1E}, // B - HD44780 style
    {0x0E, 0x11, 0x10, 0x10, 0x10, 0x11, 0x0E}, // C - HD44780 style
    {0x1E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x1E}, // D - HD44780 style
    {0x1F, 0x10, 0x10, 0x1E, 0x10, 0x10, 0x1F}, // E - HD44780 style
    {0x1F, 0x10, 0x10, 0x1E, 0x10, 0x10, 0x10}, // F - HD44780 style
    {0x0E, 0x11, 0x10, 0x17, 0x11, 0x11, 0x0E}, // G - HD44780 style
    {0x11, 0x11, 0x11, 0x1F, 0x11, 0x11, 0x11}, // H - HD44780 style
    {0x0E, 0x04, 0x04, 0x04, 0x04, 0x04, 0x0E}, // I - HD44780 style
    {0x07, 0x02, 0x02, 0x02, 0x12, 0x12, 0x0C}, // J - HD44780 style
    {0x11, 0x12, 0x14, 0x18, 0x14, 0x12, 0x11}, // K - HD44780 style
    {0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1F}, // L - HD44780 style
    {0x11, 0x1B, 0x15, 0x15, 0x11, 0x11, 0x11}, // M - HD44780 style
    {0x11, 0x11, 0x19, 0x15, 0x13, 0x11, 0x11}, // N - HD44780 style
    {0x0E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E}, // O - HD44780 style
    {0x1E, 0x11, 0x11, 0x1E, 0x10, 0x10, 0x10}, // P - HD44780 style
    {0x0E, 0x11, 0x11, 0x11, 0x15, 0x12, 0x0D}, // Q - HD44780 style
    {0x1E, 0x11, 0x11, 0x1E, 0x14, 0x12, 0x11}, // R - HD44780 style
    {0x0E, 0x11, 0x10, 0x0E, 0x01, 0x11, 0x0E}, // S - HD44780 style
    {0x1F, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04}, // T - HD44780 style
    {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E}, // U - HD44780 style
    {0x11, 0x11, 0x11, 0x11, 0x11, 0x0A, 0x04}, // V - HD44780 style
    {0x11, 0x11, 0x11, 0x15, 0x15, 0x15, 0x0A}, // W - HD44780 style
    {0x11, 0x11, 0x0A, 0x04, 0x0A, 0x11, 0x11}, // X - HD44780 style
    {0x11, 0x11, 0x0A, 0x04, 0x04, 0x04, 0x04}, // Y - HD44780 style
    {0x1F, 0x01, 0x02, 0x04, 0x08, 0x10, 0x1F}, // Z - HD44780 style
    {0x0E, 0x11, 0x13, 0x15, 0x19, 0x11, 0x0E}, // 0 - HD44780 style
    {0x04, 0x0C, 0x04, 0x04, 0x04, 0x04, 0x0E}, // 1 - HD44780 style
    {0x0E, 0x11, 0x01, 0x02, 0x04, 0x08, 0x1F}, // 2 - HD44780 style
    {0x0E, 0x11, 0x01, 0x06, 0x01, 0x11, 0x0E}, // 3 - HD44780 style
    {0x02, 0x06, 0x0A, 0x12, 0x1F, 0x02, 0x02}, // 4 - HD44780 style
    {0x1F, 0x10, 0x10, 0x1E, 0x01, 0x11, 0x0E}, // 5 - HD44780 style
    {0x0E, 0x11, 0x10, 0x1E, 0x11, 0x11, 0x0E}, // 6 - HD44780 style
    {0x1F, 0x01, 0x02, 0x04, 0x04, 0x04, 0x04}, // 7 - HD44780 style
    {0x0E, 0x11, 0x11, 0x0E, 0x11, 0x11, 0x0E}, // 8 - HD44780 style
    {0x0E, 0x11, 0x11, 0x0F, 0x01, 0x11, 0x0E}, // 9 - HD44780 style
};

static unsigned char char_to_index(char c) {
    if (c >= 'A' && c <= 'Z')
        return c - 'A' + 1;
    if (c >= 'a' && c <= 'z')
        return c - 'a' + 1;
    if (c >= '0' && c <= '9')
        return c - '0' + 27;
    if (c == ' ')
        return 0;
    return 0;
}

static void draw_char_5x7(char c, uint8_t x, uint8_t y, uint8_t r, uint8_t g,
                          uint8_t b) {
    uint8_t index = char_to_index(c);
    if (index >= sizeof(font_5x7) / sizeof(font_5x7[0])) {
        return;
    }

    for (uint8_t row = 0; row < 7; row++) {
        uint8_t bits = font_5x7[index][row];
        for (uint8_t col = 0; col < 5; col++) {
            if (bits & (0x10 >> col)) {
                hub75_set_pixel(x + col, y + row, r, g, b);
            }
        }
    }
}

static void draw_text(const char *text, uint8_t x, uint8_t y, uint8_t r,
                      uint8_t g, uint8_t b) {
    for (int i = 0; text[i] != '\0'; i++) {
        draw_char_5x7(text[i], x + i * 6, y, r, g, b);
    }
}

#endif // FONT_H_0DAD24E515E0AB81
